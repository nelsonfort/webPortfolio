<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-en="Temperature Reporter - My Portfolio" data-es="Reporte de Temperatura - Mi Portafolio">Reporte de Temperatura - Mi Portafolio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <div class="container">
            <h1 class="logo-text" data-en="Nelson Fortunatti" data-es="Nelson Fortunatti">Nelson Fortunatti</h1>
            <ul>
                <li><a href="index.html#cover" data-en="Home" data-es="Inicio">Inicio</a></li>
                <li><a href="index.html#about" data-en="About Me" data-es="Sobre Mí">Sobre Mí</a></li>
                <li><a href="index.html#projects" data-en="Projects" data-es="Proyectos">Proyectos</a></li>
                <li><a href="index.html#contact" data-en="Contact" data-es="Contacto">Contacto</a></li>
                <li id="lang-switcher"><a href="#">English</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <section class="project-detail-section">
            <div class="container">
                <h2 data-en="Temperature Reporter" data-es="Reporte de Temperatura">Reporte de Temperatura</h2>

                <div class="carousel-container">
                    <div class="carousel-slides">
                        <div class="carousel-slide" style="background-image: url('images/project5/img1.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project5/img2.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project5/img3.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project5/img4.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project5/img5.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project5/img6.jpg');"></div>
                        </div>
                </div>

                <div class="project-detail-description">
                    <h3 data-en="About This Project" data-es="Sobre Este Proyecto">Sobre Este Proyecto</h3>
                    <p data-en="This project consists of a PCB design capable of reading a 10K NTC Thermistor and reporting its temperature over DroneCAN. The device is designed to be very cheap, with a small form factor and a target mass production cost of less than 3 USD per PCB with components mounted for quantities over 100 pieces." data-es="Este proyecto consiste en un diseño de PCB capaz de leer un termistor NTC de 10K e informar su temperatura a través de DroneCAN. El dispositivo está diseñado para ser muy económico, con un factor de forma pequeño y un costo objetivo en producción masiva de menos de 3 USD por PCB con componentes montados para cantidades superiores a 100 unidades.">This project consists of a PCB design capable of reading a 10K NTC Thermistor and reporting its temperature over DroneCAN. The device is designed to be very cheap, with a small form factor and a target mass production cost of less than 3 USD per PCB with components mounted for quantities over 100 pieces.</p>
                    <h3 data-en="Key Features:" data-es="Características Clave:">Características Clave:</h3>
                    <ul>
                        <li data-en="10K NTC Thermistor Interface" data-es="Interfaz para Termistor NTC de 10K">Interfaz para Termistor NTC de 10K</li>
                        <li data-en="DroneCAN Communication" data-es="Comunicación DroneCAN">Comunicación DroneCAN</li>
                        <li data-en="Low Cost Design (< 3 USD in mass production)" data-es="Diseño de Bajo Costo (< 3 USD en producción masiva)">Diseño de Bajo Costo (< 3 USD en producción masiva)</li>
                        <li data-en="Small Form Factor" data-es="Factor de Forma Pequeño">Factor de Forma Pequeño</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p><span data-en="&copy; 2025 Nelson Fortunatti. All rights reserved." data-es="&copy; 2025 Nelson Fortunatti. Todos los derechos reservados.">&copy; 2025 Nelson Fortunatti. Todos los derechos reservados.</span></p>
            <p><span data-en="nelsonfortunatti@gmail.com" data-es="nelsonfortunatti@gmail.com">nelsonfortunatti@gmail.com</span></p>
        </div>
    </footer>

    <div id="imageModal" class="modal">
        <span class="close-modal">&times;</span>
        <a class="prev-modal">&#10094;</a>
        <img class="modal-content" id="modalImage">
        <a class="next-modal">&#10095;</a>
        <div id="caption"></div>
    </div>

    <script>
         document.addEventListener('DOMContentLoaded', () => {
             // --- Language Switcher Script ---
             const htmlTag = document.documentElement;
             const langSwitcherLink = document.getElementById('lang-switcher').querySelector('a');
             const elementsToTranslate = document.querySelectorAll('[data-en], [data-es], [data-en-placeholder], [data-es-placeholder]');
             const titleTag = document.querySelector('title');

             function setLanguage(lang) {
                 htmlTag.lang = lang;
                 localStorage.setItem('lang', lang);

                 if (lang === 'es') {
                     langSwitcherLink.textContent = 'English';
                 } else {
                     langSwitcherLink.textContent = 'Español';
                 }

                 const titleEn = titleTag.getAttribute('data-en');
                 const titleEs = titleTag.getAttribute('data-es');
                 if (lang === 'en' && titleEn) {
                     titleTag.textContent = titleEn;
                 } else if (lang === 'es' && titleEs) {
                     titleTag.textContent = titleEs;
                 }

                 elementsToTranslate.forEach(element => {
                     const textEn = element.getAttribute('data-en');
                     const textEs = element.getAttribute('data-es');
                     if (lang === 'en' && textEn !== null) {
                         element.textContent = textEn;
                     } else if (lang === 'es' && textEs !== null) {
                         element.textContent = textEs;
                     }

                     const placeholderEn = element.getAttribute('data-en-placeholder');
                     const placeholderEs = element.getAttribute('data-es-placeholder');
                     if (lang === 'en' && placeholderEn !== null) {
                          element.placeholder = placeholderEn;
                     } else if (lang === 'es' && placeholderEs !== null) {
                          element.placeholder = placeholderEs;
                     }
                 });
             }

             const savedLang = localStorage.getItem('lang');
             if (savedLang) {
                 setLanguage(savedLang);
             } else {
                  setLanguage(htmlTag.lang || 'es'); // Default to 'es' if not set
             }

             langSwitcherLink.addEventListener('click', (event) => {
                 event.preventDefault();
                 const currentLang = htmlTag.lang;
                 const newLang = currentLang === 'es' ? 'en' : 'es';
                 setLanguage(newLang);
             });

             // --- Carousel Script ---
             const carouselSlidesContainer = document.querySelector('.carousel-slides');
             const slides = document.querySelectorAll('.carousel-slide'); // Re-select for this script's scope
             const intervalTime = 2000; // 2 seconds
             let slideInterval;
             let currentIndex = 0;

             if (carouselSlidesContainer && slides.length > 0) { // Check if elements exist
                 function moveCarouselTo(index) {
                      currentIndex = index;
                      const offset = -currentIndex * 100;
                      carouselSlidesContainer.style.transform = `translateX(${offset}%)`;
                 }

                 function nextSlide() {
                     currentIndex++;
                     if (currentIndex >= slides.length) {
                          currentIndex = 0;
                     }
                     moveCarouselTo(currentIndex);
                 }

                 slideInterval = setInterval(nextSlide, intervalTime);

                 carouselSlidesContainer.parentElement.addEventListener('mouseenter', () => {
                      clearInterval(slideInterval);
                 });

                 carouselSlidesContainer.parentElement.addEventListener('mouseleave', () => {
                      slideInterval = setInterval(nextSlide, intervalTime);
                 });

                  moveCarouselTo(0); // Initialize carousel position
             } else if (slides.length > 0) { // Only slides exist, not container (should not happen with current HTML)
                 console.warn("Carousel slides found, but container .carousel-slides is missing.");
             } else {
                 console.warn("No slides found for the carousel.");
             }

             // --- Image Modal Script ---
            const modal = document.getElementById("imageModal");
            if (modal) {
                modal.style.display = "none";
            }
            const modalImg = document.getElementById("modalImage");
            // Uncommented and selected the new modal buttons
            const prevModalButton = document.querySelector(".prev-modal");
            const nextModalButton = document.querySelector(".next-modal");
            // const captionText = document.getElementById("caption"); // Uncomment if using captions

            let currentModalImageIndex = 0;
            let carouselImageSources = [];

            // Collect all carousel image sources on page load
            // This assumes all .carousel-slide elements are for the main carousel on the page
            const allCarouselSlides = document.querySelectorAll('.carousel-slide');
            allCarouselSlides.forEach(slide => {
                let style = window.getComputedStyle(slide);
                let bgImage = style.getPropertyValue('background-image');
                if (bgImage && bgImage !== 'none') {
                    // Extract URL from background-image style
                    const urlMatch = bgImage.match(/url\(["']?(.*?)["']?\)/);
                    if (urlMatch && urlMatch[1]) {
                        carouselImageSources.push(urlMatch[1]);
                    }
                }
            });

            function showImageInModal(index) {
                if (carouselImageSources.length === 0 || !modalImg) return;
                currentModalImageIndex = index;
                modalImg.src = carouselImageSources[currentModalImageIndex];
                // Example for caption:
                // const currentSlideElement = allCarouselSlides[currentModalImageIndex];
                // if (captionText && currentSlideElement) {
                //     captionText.innerHTML = currentSlideElement.getAttribute('data-caption') || '';
                // }
            }

            allCarouselSlides.forEach((slide, index) => {
                slide.onclick = function(){
                    if (modal && modalImg && carouselImageSources.length > 0) {
                        modal.style.display = "block";
                        showImageInModal(index);
                    }
                }
            });

            // Added click handlers for the new modal buttons
            if (prevModalButton) {
                prevModalButton.onclick = function() {
                    currentModalImageIndex--;
                    if (currentModalImageIndex < 0) {
                        currentModalImageIndex = carouselImageSources.length - 1;
                    }
                    showImageInModal(currentModalImageIndex);
                }
            }

            if (nextModalButton) {
                nextModalButton.onclick = function() {
                    currentModalImageIndex++;
                    if (currentModalImageIndex >= carouselImageSources.length) {
                        currentModalImageIndex = 0;
                    }
                    showImageInModal(currentModalImageIndex);
                }
            }

            const closeModalButton = document.querySelector(".close-modal");
            if (closeModalButton && modal) {
                closeModalButton.onclick = function() {
                    modal.style.display = "none";
                }
            }

            window.onclick = function(event) {
                if (event.target == modal && modal) {
                    modal.style.display = "none";
                }
            }

            // Optional: Add keyboard navigation for arrows when modal is open
            document.addEventListener('keydown', function(event) {
                if (modal && modal.style.display === "block") {
                    if (event.key === "ArrowLeft") {
                        if (prevModalButton) prevModalButton.click();
                    } else if (event.key === "ArrowRight") {
                        if (nextModalButton) nextModalButton.click();
                    } else if (event.key === "Escape") {
                        if (closeModalButton) closeModalButton.click();
                    }
                }
            });
        });
     </script>

</body>
</html>