<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-en="Smart Battery Dev Board - My Portfolio" data-es="Placa Desarrollo Batería - Mi Portafolio">Placa Desarrollo Batería - Mi Portafolio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <div class="container">
            <h1 class="logo-text" data-en="Nelson Fortunatti" data-es="Nelson Fortunatti">Nelson Fortunatti</h1>
             <ul>
                <li><a href="index.html#cover" data-en="Home" data-es="Inicio">Inicio</a></li>
                <li><a href="index.html#about" data-en="About Me" data-es="Sobre Mí">Sobre Mí</a></li>
                <li><a href="index.html#projects" data-en="Projects" data-es="Proyectos">Proyectos</a></li>
                <li><a href="index.html#contact" data-en="Contact" data-es="Contacto">Contacto</a></li>
                <li id="lang-switcher"><a href="#">English</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <section class="project-detail-section">
            <div class="container">
                <h2 data-en="Smart Battery Dev Board (6s)" data-es="Placa de Desarrollo para Batería Inteligente (6s)">Placa de Desarrollo para Batería Inteligente (6s)</h2>

                <div class="carousel-container">
                    <div class="carousel-slides">
                        <div class="carousel-slide" style="background-image: url('images/project1/img1.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project1/img2.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project1/img3.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project1/img4.jpg');"></div>
                        <div class="carousel-slide" style="background-image: url('images/project1/img5.jpg');"></div>
                    </div>
                </div>

                <div class="project-detail-description">
                    <h3 data-en="About This Project" data-es="Sobre Este Proyecto">Sobre Este Proyecto</h3>
                    <p data-en="This development board was a crucial step in designing a robust 6s Li-Ion/LiPo smart battery system. Its primary purpose was to allow for rigorous testing of key components, particularly MOSFETs and shunt resistors, under significant current loads up to 50A. This helped validate thermal performance and component selection before moving to a compact PCB design." data-es="Esta placa de desarrollo fue un paso crucial en el diseño de un robusto sistema de batería inteligente 6s Li-Ion/LiPo. Su propósito principal fue permitir pruebas rigurosas de componentes clave, particularmente MOSFETs y resistencias shunt, bajo cargas de corriente significativas de hasta 50A. Esto ayudó a validar el rendimiento térmico y la selección de componentes antes de pasar a un diseño de PCB compacto.">Esta placa de desarrollo fue un paso crucial en el diseño de un robusto sistema de batería inteligente 6s Li-Ion/LiPo. Su propósito principal fue permitir pruebas rigurosas de componentes clave, particularmente MOSFETs y resistencias shunt, bajo cargas de corriente significativas de hasta 50A. Esto ayudó a validar el rendimiento térmico y la selección de componentes antes de pasar a un diseño de PCB compacto.</p>
                    <p data-en="Furthermore, the board facilitated the integration and configuration of the battery gauge IC, based on the Texas Instruments BQ40z80. This involved setting up crucial parameters for accurate state-of-charge (SOC) and state-of-health (SOH) monitoring. We also integrated and tested a secondary hardware protection circuit, including a triggerable fuse, enhancing safety measures controlled by both the gauge and a dedicated protector IC." data-es="Además, la placa facilitó la integración y configuración del CI de medición de batería, basado en el BQ40z80 de Texas Instruments. Esto implicó la configuración de parámetros cruciales para un monitoreo preciso del estado de carga (SOC) y estado de salud (SOH). También integramos y probamos un circuito de protección de hardware secundario, incluyendo un fusible disparable, mejorando las medidas de seguridad controladas tanto por el medidor como por un CI protector dedicado.">Furthermore, the board facilitated the integration and configuration of the battery gauge IC, based on the Texas Instruments BQ40z80. This involved setting up crucial parameters for accurate state-of-charge (SOC) and state-of-health (SOH) monitoring. We also integrated and tested a secondary hardware protection circuit, including a triggerable fuse, enhancing safety measures controlled by both the gauge and a dedicated protector IC.</p>
                    <h3 data-en="Key Learnings:" data-es="Aprendizajes Clave:">Aprendizajes Clave:</h3>
                    <ul>
                        <li data-en="Validated thermal performance of power stage components under high load." data-es="Validación del rendimiento térmico de los componentes de la etapa de potencia bajo alta carga.">Validación del rendimiento térmico de los componentes de la etapa de potencia bajo alta carga.</li>
                        <li data-en="Successful integration and configuration of the BQ40z80 gauge IC." data-es="Integración y configuración exitosa del CI de medición BQ40z80.">Integración y configuración exitosa del CI de medición BQ40z80.</li>
                        <li data-en="Demonstrated the effectiveness of the secondary triggerable fuse protection." data-es="Demostración de la efectividad de la protección secundaria con fusible disparable.">Demostración de la efectividad de la protección secundaria con fusible disparable.</li>
                    </ul>
                    </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p><span data-en="&copy; 2025 Nelson Fortunatti. All rights reserved." data-es="&copy; 2025 Nelson Fortunatti. Todos los derechos reservados.">&copy; 2025 Nelson Fortunatti. Todos los derechos reservados.</span></p>
            <p><span data-en="nelsonfortunatti@gmail.com" data-es="nelsonfortunatti@gmail.com">nelsonfortunatti@gmail.com</span></p>
        </div>
    </footer>

    <div id="imageModal" class="modal">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="modalImage">
        <div id="caption"></div>
    </div>

    <script>
         document.addEventListener('DOMContentLoaded', () => {
             // --- Language Switcher Script ---
             const htmlTag = document.documentElement;
             const langSwitcherLink = document.getElementById('lang-switcher').querySelector('a');
             const elementsToTranslate = document.querySelectorAll('[data-en], [data-es], [data-en-placeholder], [data-es-placeholder]');
             const titleTag = document.querySelector('title');

             function setLanguage(lang) {
                 htmlTag.lang = lang;
                 localStorage.setItem('lang', lang);

                 if (lang === 'es') {
                     langSwitcherLink.textContent = 'English';
                 } else {
                     langSwitcherLink.textContent = 'Español';
                 }

                 const titleEn = titleTag.getAttribute('data-en');
                 const titleEs = titleTag.getAttribute('data-es');
                 if (lang === 'en' && titleEn) {
                     titleTag.textContent = titleEn;
                 } else if (lang === 'es' && titleEs) {
                     titleTag.textContent = titleEs;
                 }

                 elementsToTranslate.forEach(element => {
                     const textEn = element.getAttribute('data-en');
                     const textEs = element.getAttribute('data-es');
                     if (lang === 'en' && textEn !== null) {
                         element.textContent = textEn;
                     } else if (lang === 'es' && textEs !== null) {
                         element.textContent = textEs;
                     }

                     const placeholderEn = element.getAttribute('data-en-placeholder');
                     const placeholderEs = element.getAttribute('data-es-placeholder');
                     if (lang === 'en' && placeholderEn !== null) {
                          element.placeholder = placeholderEn;
                     } else if (lang === 'es' && placeholderEs !== null) {
                          element.placeholder = placeholderEs;
                     }
                 });
             }

             const savedLang = localStorage.getItem('lang');
             if (savedLang) {
                 setLanguage(savedLang);
             } else {
                  setLanguage(htmlTag.lang || 'es'); // Default to 'es' if not set
             }

             langSwitcherLink.addEventListener('click', (event) => {
                 event.preventDefault();
                 const currentLang = htmlTag.lang;
                 const newLang = currentLang === 'es' ? 'en' : 'es';
                 setLanguage(newLang);
             });

             // --- Carousel Script ---
             const carouselSlidesContainer = document.querySelector('.carousel-slides');
             const slides = document.querySelectorAll('.carousel-slide'); // Re-select for this script's scope
             const intervalTime = 2000; // 2 seconds
             let slideInterval;
             let currentIndex = 0;

             if (carouselSlidesContainer && slides.length > 0) { // Check if elements exist
                 function moveCarouselTo(index) {
                      currentIndex = index;
                      const offset = -currentIndex * 100;
                      carouselSlidesContainer.style.transform = `translateX(${offset}%)`;
                 }

                 function nextSlide() {
                     currentIndex++;
                     if (currentIndex >= slides.length) {
                          currentIndex = 0;
                     }
                     moveCarouselTo(currentIndex);
                 }

                 slideInterval = setInterval(nextSlide, intervalTime);

                 carouselSlidesContainer.parentElement.addEventListener('mouseenter', () => {
                      clearInterval(slideInterval);
                 });

                 carouselSlidesContainer.parentElement.addEventListener('mouseleave', () => {
                      slideInterval = setInterval(nextSlide, intervalTime);
                 });

                  moveCarouselTo(0); // Initialize carousel position
             } else if (slides.length > 0) { // Only slides exist, not container (should not happen with current HTML)
                 console.warn("Carousel slides found, but container .carousel-slides is missing.");
             } else {
                 console.warn("No slides found for the carousel.");
             }

             // --- Image Modal Script ---
            const modal = document.getElementById("imageModal");
            const modalImg = document.getElementById("modalImage");
            // const captionText = document.getElementById("caption"); // Uncomment if using captions

            document.querySelectorAll('.carousel-slide').forEach(slide => {
                slide.onclick = function(){
                    if (modal && modalImg) { // Ensure modal elements are found
                        modal.style.display = "block";
                        let style = window.getComputedStyle(this);
                        let bgImage = style.getPropertyValue('background-image');
                        // Clean up the URL string: remove url("...") and any quotes
                        modalImg.src = bgImage.replace(/^url\(["']?/, '').replace(/["']?\)$/, '');
                        // Example for caption: captionText.innerHTML = this.getAttribute('data-caption') || '';
                    }
                }
            });

            const closeModalButton = document.querySelector(".close-modal");
            if (closeModalButton && modal) {
                closeModalButton.onclick = function() {
                    modal.style.display = "none";
                }
            }

            window.onclick = function(event) {
                if (event.target == modal && modal) {
                    modal.style.display = "none";
                }
            }
         });
     </script>

</body>
</html>